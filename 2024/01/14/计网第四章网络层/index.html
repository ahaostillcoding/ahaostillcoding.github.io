

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/xiaoxin.jpg">
  <link rel="icon" href="/img/xiaoxin.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="a_hao">
  <meta name="keywords" content="">
  
    <meta name="description" content="网络层的主要任务是实现网络互连，进而实现数据包在个网络之间的传输   一。重要概念1.提供的两种服务 网络层要设计得尽量简单，向其上层只提供简单灵活的、无连接的、尽最大努力交付的数据报服务(IP数据报&#x2F;IP分组)  ​    IP数据报 &#x3D; IP分组 1)虚电路服务​    通信时，需要先建立连接(分组交换中是建立一条虚电路）。 ​    然后双方沿着建立的虚电路发送分组。 ​    通信结束后">
<meta property="og:type" content="article">
<meta property="og:title" content="计网第四章网络层">
<meta property="og:url" content="https://ahaostillcoding.github.io/2024/01/14/%E8%AE%A1%E7%BD%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="阿豪博客">
<meta property="og:description" content="网络层的主要任务是实现网络互连，进而实现数据包在个网络之间的传输   一。重要概念1.提供的两种服务 网络层要设计得尽量简单，向其上层只提供简单灵活的、无连接的、尽最大努力交付的数据报服务(IP数据报&#x2F;IP分组)  ​    IP数据报 &#x3D; IP分组 1)虚电路服务​    通信时，需要先建立连接(分组交换中是建立一条虚电路）。 ​    然后双方沿着建立的虚电路发送分组。 ​    通信结束后">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107154725315.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107153627806.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107155749929.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107160137025.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107163530354.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107164235381.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107164250713.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107201019963.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107201248590.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107202209133.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107203713325.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107211430679.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240109160720793.png">
<meta property="og:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240109161218756.png">
<meta property="article:published_time" content="2024-01-14T08:42:24.000Z">
<meta property="article:modified_time" content="2024-01-14T08:50:24.836Z">
<meta property="article:author" content="a_hao">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107154725315.png">
  
  
  
  <title>计网第四章网络层 - 阿豪博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ahaostillcoding.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>阿豪</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计网第四章网络层"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-01-14 16:42" pubdate>
          2024年1月14日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          55 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">计网第四章网络层</h1>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>网络层的主要任务是实现网络互连，进而实现数据包在个网络之间的传输</p>
</blockquote>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107154725315.png" srcset="/img/loading.gif" lazyload alt="image-20240107154725315"></p>
<h2 id="一。重要概念"><a href="#一。重要概念" class="headerlink" title="一。重要概念"></a>一。重要概念</h2><h3 id="1-提供的两种服务"><a href="#1-提供的两种服务" class="headerlink" title="1.提供的两种服务"></a>1.提供的两种服务</h3><blockquote>
<p>网络层要设计得尽量简单，向其上层只提供简单灵活的、无连接的、尽最大努力交付的<strong>数据报服务(IP数据报/IP分组)</strong></p>
</blockquote>
<p>​    IP数据报 = IP分组</p>
<h4 id="1-虚电路服务"><a href="#1-虚电路服务" class="headerlink" title="1)虚电路服务"></a>1)虚电路服务</h4><p>​    通信时，需要先建立连接(分组交换中是建立一条虚电路）。</p>
<p>​    然后双方沿着建立的虚电路发送分组。</p>
<p>​    通信结束后要释放建立的虚电路</p>
<h4 id="2-数据报服务"><a href="#2-数据报服务" class="headerlink" title="2)数据报服务"></a>2)数据报服务</h4><p>​    每个分组独立发送，与前后的分组无关。</p>
<blockquote>
<p>应用层、传输层提供可靠传输</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">对比</th>
<th align="center">虚电路</th>
<th align="center">数据报</th>
</tr>
</thead>
<tbody><tr>
<td align="center">思路</td>
<td align="center">可靠通信应当由网络来保证</td>
<td align="center">可靠通信由用户主机来保证</td>
</tr>
<tr>
<td align="center">连接的建立</td>
<td align="center">必须建立连接</td>
<td align="center">不需要</td>
</tr>
<tr>
<td align="center">终点地址</td>
<td align="center">仅在连接建立阶段使用，每个分组使用短的虚电路号</td>
<td align="center">每个分组都有终点的完整地址(IP地址)</td>
</tr>
<tr>
<td align="center">分组的转发</td>
<td align="center">属于同一条虚电路的分组均按照同一路由进行转发</td>
<td align="center">每个分组独立查找转发表进行转发</td>
</tr>
<tr>
<td align="center">当节点出现故障时</td>
<td align="center">所有通过出故障的节点的虚电路均不能工作</td>
<td align="center">出故障的节点可能丢失分组，一些路由可能会发生变化</td>
</tr>
<tr>
<td align="center">分组的顺序</td>
<td align="center">总是按发送顺序达到终点</td>
<td align="center">到达终点的顺序不一定按发送的顺序</td>
</tr>
<tr>
<td align="center">端到端的差错处理和流量控制</td>
<td align="center">可以由网络负责，也可由用户主机负责</td>
<td align="center">由用户主机负责</td>
</tr>
<tr>
<td align="center">成本</td>
<td align="center">成本高</td>
<td align="center">成本低</td>
</tr>
<tr>
<td align="center">是否可靠</td>
<td align="center">可靠传输</td>
<td align="center">不可靠传输</td>
</tr>
</tbody></table>
<h3 id="2-两个层面"><a href="#2-两个层面" class="headerlink" title="2.两个层面"></a>2.两个层面</h3><p>​    不同网络的两个主机之间通信，要经过若干个路由表转发分组完成，<strong>分组查找路由表中的转发表</strong>，根据转发表中指明转发到下一个路由器。</p>
<p>​    :star:<strong>转发表是由路由表导出的</strong>，路由表又是互联网中许多路由器，按共同选定的路由选择协议，通过许多次的相互交换路由信息产生的。</p>
<h4 id="路由器之间传送的信息"><a href="#路由器之间传送的信息" class="headerlink" title="路由器之间传送的信息"></a>路由器之间传送的信息</h4><ul>
<li>转发源主机和目的主机之间所传送的数据</li>
<li>传送路由信息</li>
</ul>
<h4 id="1-数据层面"><a href="#1-数据层面" class="headerlink" title="1.数据层面"></a>1.数据层面</h4><ul>
<li>每个路由器根据路由器生成的转发表，把收到的分组，按查找到的对应接口转发。</li>
<li>使用硬件进行转发。速度快</li>
</ul>
<h4 id="2-控制层面"><a href="#2-控制层面" class="headerlink" title="2.控制层面"></a>2.控制层面</h4><ul>
<li>路由选择算法使用软件，速度慢</li>
</ul>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107153627806.png" srcset="/img/loading.gif" lazyload alt="image-20240107153627806"></p>
<h4 id="软件定义网络SDN"><a href="#软件定义网络SDN" class="headerlink" title="软件定义网络SDN"></a>软件定义网络SDN</h4><blockquote>
<p>将控制层面的工作几种在远程控制器上执行</p>
</blockquote>
<p>​    计算出最佳的路由，在每个路由器中生成其正确的转发表</p>
<h2 id="二。网际协议IP-Internet-Protocol"><a href="#二。网际协议IP-Internet-Protocol" class="headerlink" title="二。网际协议IP(Internet Protocol)"></a>二。网际协议IP(Internet Protocol)</h2><h3 id="与协议IP配套使用的三个协议"><a href="#与协议IP配套使用的三个协议" class="headerlink" title="与协议IP配套使用的三个协议"></a>与协议IP配套使用的三个协议</h3><ul>
<li>地址解析协议ARP</li>
<li>网际控制报文协议ICMP</li>
<li>网际管理协议IGMP</li>
</ul>
<h3 id="1、IP地址"><a href="#1、IP地址" class="headerlink" title="1、IP地址"></a>1、IP地址</h3><h4 id="1-表示方法"><a href="#1-表示方法" class="headerlink" title="1.表示方法"></a>1.表示方法</h4><blockquote>
<p>IPV4    32位二进制    IPV6    128位</p>
<p>同一局域网的主机或路由器的IP地址的网络前缀必须时同样的</p>
</blockquote>
<p>IP地址由网络号和主机号组成</p>
<h4 id="2-分类的IP地址"><a href="#2-分类的IP地址" class="headerlink" title="2.分类的IP地址"></a>2.分类的IP地址</h4><h5 id="1）单播地址"><a href="#1）单播地址" class="headerlink" title="1）单播地址"></a>1）单播地址</h5><p><strong>A类： 网络号n = 8</strong></p>
<ul>
<li>网络号首位为固定为0，只有7位网络号可用<ul>
<li>网络号全0表示<strong>本网络</strong></li>
<li>01111111表示本地环回地址(127)</li>
</ul>
</li>
<li>可指派网络号为126个(2^7 - 1 = 126个)</li>
</ul>
<ul>
<li>全0和全1的主机号一般不指派<ul>
<li>全0主机号表示<strong>本主机</strong></li>
<li>全1主机号表示<strong>所有的</strong></li>
</ul>
</li>
<li>最大主机数2^24 -2 = 16777214</li>
</ul>
<p><strong>B类： 网络号n = 16</strong></p>
<ul>
<li>可指派网络数 2^14<ul>
<li>128开始</li>
</ul>
</li>
<li>最大主机数2^16 - 2</li>
</ul>
<p>C类： 网络号n = 24</p>
<ul>
<li>可指派网络数 2^21<ul>
<li>192开始</li>
</ul>
</li>
<li>最大主机数 2^8 - 2</li>
</ul>
<h5 id="2）多播地址"><a href="#2）多播地址" class="headerlink" title="2）多播地址"></a>2）多播地址</h5><p>D类： 网络号n = 4</p>
<p>3）保留地址</p>
<p>E类： 网络号 n = 4 保留之后使用</p>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107155749929.png" srcset="/img/loading.gif" lazyload alt="image-20240107155749929"></p>
<h4 id="一般不指派的特殊IP地址"><a href="#一般不指派的特殊IP地址" class="headerlink" title="一般不指派的特殊IP地址"></a>一般不指派的特殊IP地址</h4><p><strong><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107160137025.png" srcset="/img/loading.gif" lazyload alt="image-20240107160137025"></strong></p>
<h3 id="2、无分类编址CIDR"><a href="#2、无分类编址CIDR" class="headerlink" title="2、无分类编址CIDR"></a>2、无分类编址CIDR</h3><blockquote>
<p>把IP地址分为网络前缀和主机号</p>
<p>网络前缀的位数n不固定</p>
</blockquote>
<h4 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h4><ul>
<li>128.14.35.7/20 <ul>
<li>前20位位网络前缀</li>
</ul>
</li>
</ul>
<h4 id="地址块"><a href="#地址块" class="headerlink" title="地址块"></a>地址块</h4><ul>
<li>把<strong>网络前缀相同</strong>的所有<strong>连续</strong>IP地址组成一个CIDR地址块</li>
</ul>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107163530354.png" srcset="/img/loading.gif" lazyload alt="image-20240107163530354"></p>
<h4 id="地址掩码-子网掩码"><a href="#地址掩码-子网掩码" class="headerlink" title="地址掩码(子网掩码)"></a>地址掩码(子网掩码)</h4><blockquote>
<p><strong>计算机看不见斜线记法</strong>，使用二进制来进行各种计算时必须使用32位地址掩码能够从IP地址算出网络地址</p>
</blockquote>
<h5 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h5><ul>
<li>由一连串1或者0组成<ul>
<li>1的个数就是网络前缀的程度</li>
</ul>
</li>
</ul>
<p>/20地址块的地址掩码就是 20个连续的1和12个连续的0组成</p>
<blockquote>
<p>IP地址与子网掩码进行 <strong>按位与运算</strong> 就能得到网络地址</p>
</blockquote>
<ul>
<li>A类网络： 地址掩码255.0.0.0或者255.0.0.0/8</li>
<li>B类网络： 地址掩码255.255.0.0或者255.255.0.0/16</li>
<li>C类网络： 地址掩码255.255.255.0或者255.255.255.0/24</li>
</ul>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107164235381.png" srcset="/img/loading.gif" lazyload alt="image-20240107164235381"></p>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107164250713.png" srcset="/img/loading.gif" lazyload alt="image-20240107164250713"></p>
<h5 id="路由聚合"><a href="#路由聚合" class="headerlink" title="路由聚合"></a>路由聚合</h5><blockquote>
<p>用一个较大的CIDR的地址块代替许多较小的地址块</p>
</blockquote>
<p>​    看习题4-22</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">212.56.132.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">212.56.133.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">212.56.134.0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">212.56.135.0</span>/<span class="hljs-number">24</span><br>四个地址块进行最大可能聚合<br><br><span class="hljs-number">212.56.132.0</span>/<span class="hljs-number">24</span>          ------&gt;            <span class="hljs-number">212</span>.<span class="hljs-number">56</span>.<span class="hljs-number">10000100</span>.<span class="hljs-number">0</span><br><span class="hljs-number">212.56.133.0</span>/<span class="hljs-number">24</span>	        ------&gt;		  <span class="hljs-number">212</span>.<span class="hljs-number">56</span>.<span class="hljs-number">10000101</span>.<span class="hljs-number">0</span><br><span class="hljs-number">212.56.134.0</span>/<span class="hljs-number">24</span>		------&gt;		  <span class="hljs-number">212</span>.<span class="hljs-number">56</span>.<span class="hljs-number">10000110</span>.<span class="hljs-number">0</span><br><span class="hljs-number">212.56.135.0</span>/<span class="hljs-number">24</span>		------&gt;		  <span class="hljs-number">212</span>.<span class="hljs-number">56</span>.<span class="hljs-number">10000111</span>.<span class="hljs-number">0</span><br><br>划分成<br><span class="hljs-number">212</span>.<span class="hljs-number">56</span>.<span class="hljs-number">10000100</span>.<span class="hljs-number">0</span><br><br>即<span class="hljs-number">212</span>.<span class="hljs-number">56</span>.<span class="hljs-number">132</span>.<span class="hljs-number">0</span>/<span class="hljs-number">22</span><br></code></pre></td></tr></table></figure>



<h3 id="3-IP地址的特点"><a href="#3-IP地址的特点" class="headerlink" title="3.IP地址的特点"></a>3.IP地址的特点</h3><blockquote>
<p>IP地址是网络层和以上各层使用的地址，是一种逻辑地址(用软件实现)</p>
<p>MAC地址是数据链路层使用的地址</p>
</blockquote>
<p>1）每个IP地址都由网络前缀和主机号两部分注册</p>
<p>2）IP地址是标志一台主机和一条链路的接口</p>
<p>3）一个网络是指具有相同网络前缀的主机的集合</p>
<ul>
<li>用转发器或交换机连接起来的若干个局域网仍为一个网络</li>
</ul>
<p>4）IP地址中，所有分配到的网络前缀的网络都是平等的。</p>
<ul>
<li>互联网平等对待每一个IP地址</li>
</ul>
<ul>
<li>路由器总具有两个或两个以上的IP地址。每个接口的IP地址的网络前缀都不同</li>
</ul>
<h3 id="4-IP地址与MAC地址"><a href="#4-IP地址与MAC地址" class="headerlink" title="4.IP地址与MAC地址"></a>4.IP地址与MAC地址</h3><p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107201019963.png" srcset="/img/loading.gif" lazyload alt="image-20240107201019963"></p>
<blockquote>
<p> 转发过程中源IP地址和目的IP地址没有改变</p>
</blockquote>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107201248590.png" srcset="/img/loading.gif" lazyload alt="image-20240107201248590"></p>
<ul>
<li>IP层抽象的互联网上只能看到IP数据报<ul>
<li>路由器只根据目的站的IP地址进行转发</li>
</ul>
</li>
<li>在局域网的链路层，只能看到MAC帧</li>
</ul>
<h3 id="5-IP数据报的格式"><a href="#5-IP数据报的格式" class="headerlink" title="5.IP数据报的格式"></a>5.IP数据报的格式</h3><p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107202209133.png" srcset="/img/loading.gif" lazyload alt="image-20240107202209133"></p>
<h4 id="1）首部长度："><a href="#1）首部长度：" class="headerlink" title="1）首部长度："></a>1）首部长度：</h4><ul>
<li><p>占4位</p>
</li>
<li><p>IP首部的固定部分是20字节</p>
<ul>
<li>IP数据报必须具有的部分</li>
</ul>
</li>
</ul>
<h4 id="2）总长度"><a href="#2）总长度" class="headerlink" title="2）总长度"></a>2）总长度</h4><ul>
<li>总长度指首部和数据之和的长度</li>
<li>16位</li>
</ul>
<p>​    数据帧的数据字段的最大长度称为MTU(最大传送单元)，如果数据报长度超过MTU，就必须把过长的数据报进行<strong>分片处理</strong></p>
<blockquote>
<p>数据报的最大程度为 2^16 -1 = 65535字节。而MTU一般为1500字节</p>
</blockquote>
<h4 id="3）标志"><a href="#3）标志" class="headerlink" title="3）标志"></a>3）标志</h4><ul>
<li>标志字段中的最低位为MF。<ul>
<li>MF = 1 表示后面还有分片</li>
<li>MF = 0 表示这是若干数据报片中的最后一个</li>
</ul>
</li>
<li>标志字段中间一位为DF<ul>
<li>代表不能分片</li>
<li>DF = 0 时候才能分片</li>
</ul>
</li>
</ul>
<h4 id="4）片偏移"><a href="#4）片偏移" class="headerlink" title="4）片偏移"></a>4）片偏移</h4><ul>
<li>较长的分组在分片后，某片在原分组中的相对位置</li>
<li>片偏移以<strong>8个字节</strong>为偏移单位</li>
<li>除了最后一个数据报片外，其他每个分片的长度一定是8字节的整数倍</li>
</ul>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107203713325.png" srcset="/img/loading.gif" lazyload alt="image-20240107203713325"></p>
<h4 id="5）生存时间"><a href="#5）生存时间" class="headerlink" title="5）生存时间"></a>5）生存时间</h4><ul>
<li>占8位</li>
<li>生存时间的英文TTL，表名是数据报在网络中的寿命</li>
</ul>
<p>现在已经把TTL改为了<strong>跳数限制</strong></p>
<blockquote>
<p>每经过一个路由器时，TTL就会就会减去1.</p>
<p>TTL为0时，就丢弃这个数据报</p>
</blockquote>
<h2 id="三。ICMP"><a href="#三。ICMP" class="headerlink" title="三。ICMP"></a>三。ICMP</h2><blockquote>
<p>网际控制报文协议ICMP</p>
<p>IP数据报首部的检验和并不检验IP数据报的内容，因此不能保证经过传输的ICMP报文不产生差错</p>
</blockquote>
<h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><p>​    更有效转发IP数据报和提高交付成功的机会，在网际层使用了网际控制报文协议ICMP</p>
<h3 id="报文分类"><a href="#报文分类" class="headerlink" title="报文分类"></a>报文分类</h3><blockquote>
<p>ICMP报文被封装在<strong>IP数据报</strong>中发送</p>
</blockquote>
<h4 id="1）ICMP差错报告报文"><a href="#1）ICMP差错报告报文" class="headerlink" title="1）ICMP差错报告报文"></a>1）ICMP差错报告报文</h4><h5 id="终点不可达"><a href="#终点不可达" class="headerlink" title="终点不可达"></a>终点不可达</h5><ul>
<li>路由器或主机不能交付数据报是发送</li>
</ul>
<h5 id="时间超过"><a href="#时间超过" class="headerlink" title="时间超过"></a>时间超过</h5><ul>
<li>TTL = 0</li>
</ul>
<h5 id="参数问题"><a href="#参数问题" class="headerlink" title="参数问题"></a>参数问题</h5><ul>
<li>路由器或者目的主机收到的数据报的首部中有的字段值不正确，应该丢弃</li>
</ul>
<h5 id="改变路由-重定向"><a href="#改变路由-重定向" class="headerlink" title="改变路由(重定向)"></a>改变路由(重定向)</h5><ul>
<li>路由器把改变路由报文发给主机，让主机知道下次应将数据报发给另外的路由器</li>
</ul>
<h4 id="2）ICMP询问报文"><a href="#2）ICMP询问报文" class="headerlink" title="2）ICMP询问报文"></a>2）ICMP询问报文</h4><h5 id="1-回送-Echo-请求或回送回答"><a href="#1-回送-Echo-请求或回送回答" class="headerlink" title="1.回送(Echo)请求或回送回答"></a>1.回送(Echo)请求或回送回答</h5><blockquote>
<p>用于测试目的站是否可达以及了解其有关状态(Ping/tracert)</p>
</blockquote>
<ul>
<li>由主机或路由器向一个<strong>特定的目的主机</strong>发出的询问<ul>
<li>收到此报文的主机必须向源主机或路由器发送ICMP回送回答报文</li>
</ul>
</li>
</ul>
<h5 id="2-时间戳-Timestamp-请求或时间戳回答"><a href="#2-时间戳-Timestamp-请求或时间戳回答" class="headerlink" title="2.时间戳(Timestamp)请求或时间戳回答"></a>2.时间戳(Timestamp)请求或时间戳回答</h5><ul>
<li>时间戳请求报文发出后，就能够收到对方响应的ICMP时间戳回答报文<ul>
<li>计算出当前网络的往返时延</li>
</ul>
</li>
</ul>
<h3 id="不发送ICMP差错报告报文的情况"><a href="#不发送ICMP差错报告报文的情况" class="headerlink" title="不发送ICMP差错报告报文的情况"></a>不发送ICMP差错报告报文的情况</h3><p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240107211430679.png" srcset="/img/loading.gif" lazyload alt="image-20240107211430679"></p>
<h2 id="star-四。路由选择协议"><a href="#star-四。路由选择协议" class="headerlink" title=":star:四。路由选择协议"></a>:star:四。路由选择协议</h2><blockquote>
<p>路由选择协议是网络层控制层面的内容</p>
</blockquote>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><h4 id="1。静态路由选择策略"><a href="#1。静态路由选择策略" class="headerlink" title="1。静态路由选择策略"></a>1。静态路由选择策略</h4><p>​    非自适应路由选择。</p>
<ul>
<li>简单和开销小</li>
<li>不能及时适应网络状态的变化</li>
<li>适用于简单的小网络</li>
</ul>
<h4 id="2。动态路由选择策略"><a href="#2。动态路由选择策略" class="headerlink" title="2。动态路由选择策略"></a>2。动态路由选择策略</h4><p>​    自适应路由选择</p>
<ul>
<li>能较好适应网络状态变化</li>
<li>实现起来较为复杂，开销也大</li>
</ul>
<p>采用的主要还是自适应的、分布式路由选择协议(动态路由选择)</p>
<h3 id="分层次的路由选择协议"><a href="#分层次的路由选择协议" class="headerlink" title="分层次的路由选择协议"></a>分层次的路由选择协议</h3><blockquote>
<p>互联网划分成许多较小的自治系统，即为AS</p>
<p>AS是单一技术管理下的许多网络、IP地址以及路由器</p>
</blockquote>
<h4 id="内部网关协议IGP"><a href="#内部网关协议IGP" class="headerlink" title="内部网关协议IGP"></a>内部网关协议IGP</h4><p>​    <strong>一个自治系统内部使用的路由选择协议</strong></p>
<ul>
<li>RIP</li>
<li>OSPF</li>
</ul>
<h4 id="外部网关协议EGP"><a href="#外部网关协议EGP" class="headerlink" title="外部网关协议EGP"></a>外部网关协议EGP</h4><p>​    源主机和目的主机不在同一个AS中，就需要使用EGP</p>
<ul>
<li>BGP-4</li>
</ul>
<h3 id="路由信息协议RIP"><a href="#路由信息协议RIP" class="headerlink" title="路由信息协议RIP"></a>路由信息协议RIP</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>​    <strong>一种分布式的、基于距离向量的路由选择协议</strong></p>
<ul>
<li>是内部网关协议IGP最先得到广泛使用的协议</li>
</ul>
<h4 id="距离-跳数"><a href="#距离-跳数" class="headerlink" title="距离(跳数)"></a>距离(跳数)</h4><blockquote>
<p><strong>最佳路由 = 距离最短的路由</strong></p>
</blockquote>
<ul>
<li>路由器到直接连接的网络的距离 = 1</li>
<li>路由器到非直接连接的网络的距离 = 所经过的路由器数 + 1<ul>
<li>每经过一个路由器，跳数就加1</li>
</ul>
</li>
</ul>
<p>​    一条路径最多包含15个路由器</p>
<p>​    <strong>距离(跳数) = 16 表示不可达</strong></p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>1）仅和<strong>相邻</strong>路由器交换信息</p>
<p>2）路由器交换的信息就是<strong>当前本路由器所知道的全部信息</strong>，即自己现在的<strong>路由表</strong></p>
<p>3）按<strong>固定的时间间隔</strong>交换路由信息(更新路由表)</p>
<p>开始工作的时候，路由表是空的</p>
<ul>
<li>只知道自己到直连网络的距离都为1</li>
<li>与相邻路由器周期交换更新路由信息</li>
<li>若干次交换和更新后，收敛(每个路由器都知道到达本AS内各个网络的最短距离和下一跳地址)</li>
</ul>
<p>​    </p>
<h4 id="距离向量算法"><a href="#距离向量算法" class="headerlink" title="距离向量算法"></a>距离向量算法</h4><ul>
<li>发现新的目的网络，更新</li>
<li>到达目的网络，相同下一跳。最新消息，更新</li>
<li>到达目的网络，不同下一跳，相同距离，等价负载均衡，更新</li>
<li>到达目的网络，不同下一跳，距离远，不更新</li>
</ul>
<h4 id="坏消息传播得慢"><a href="#坏消息传播得慢" class="headerlink" title="坏消息传播得慢"></a>坏消息传播得慢</h4><blockquote>
<p>好消息传播的快，而坏消息传播得慢</p>
</blockquote>
<p>​    出现路由环路问题</p>
<h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><ul>
<li>限制最大路径距离15</li>
<li>当路由表发送变化时就立即发送更新报文，不是周期性发送</li>
<li>让路由器记录收到特定路由信息得接口，而不让同一路由信息再通过此接口反方向传送</li>
</ul>
<h3 id="开放最短路径优先OSPF"><a href="#开放最短路径优先OSPF" class="headerlink" title="开放最短路径优先OSPF"></a>开放最短路径优先OSPF</h3><blockquote>
<p>克服RIP缺点提出</p>
<p>使用了最短路径算法SPF</p>
</blockquote>
<p>基于<strong>链路状态</strong>协议，不像RIP基于距离向量</p>
<ul>
<li>采用SPF算法计算路由，不会产生路由环路</li>
<li>不限制网络规模，更新效率高，收敛速度块</li>
</ul>
<p>链路状态是指路由器都和哪些路由器相近，以及相应链路的代价(cost)</p>
<ul>
<li>代价：费用、距离、时延、带宽</li>
</ul>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><blockquote>
<p><strong>链路状态数据库</strong>能较快地进行更新，使各个路由器能及时更新其路由表。</p>
<p>:star:<strong>OSPF更新过程收敛速度快</strong></p>
</blockquote>
<h4 id="三个特点"><a href="#三个特点" class="headerlink" title="三个特点"></a>三个特点</h4><p>1）采用<strong>洪泛法</strong>，向本自治系统中<strong>所有路由器</strong>发送消息</p>
<p>2）发送的消息是与本<strong>路由器相邻</strong>的所有路由器的<strong>链路状态</strong>，但这只是路由器知道的部分信息</p>
<ul>
<li>链路状态：本路由器都和哪些路由器<strong>相邻</strong>，以及该链路的度量(metric)<ul>
<li>度量：费用、距离、时延、代价、带宽等</li>
</ul>
</li>
</ul>
<p>3）当链路状态<strong>发生变化</strong>或<strong>每隔一段时间</strong>，路由器用洪泛法向所有路由器发送此消息</p>
<h4 id="划分区域"><a href="#划分区域" class="headerlink" title="划分区域"></a>划分区域</h4><blockquote>
<p>为了使OSPF能用于规模很大的网络，OSPF将一个自治系统再划分为若干个更小的范围，称为区域</p>
</blockquote>
<h5 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h5><ul>
<li>利用洪泛法交换链路状态信息的范围局限于每个区域而不是整个自治系统，减少了整个网络上的通信量</li>
<li>再一个区域内部的录取只知道本区域的网站网络拓扑，不知道其他区域的网络托盘情况</li>
</ul>
<h4 id="五种分组内容"><a href="#五种分组内容" class="headerlink" title="五种分组内容"></a>五种分组内容</h4><h5 id="1。问候-Hello-分组"><a href="#1。问候-Hello-分组" class="headerlink" title="1。问候(Hello)分组"></a>1。问候(Hello)分组</h5><ul>
<li>用于发现和维持邻站的可达性</li>
</ul>
<p>​    每10交换一次问候分组，如果40秒没有收到某个相邻路由器发送的问候分组，则可认为相邻路由器不可达</p>
<h5 id="2。数据库描述分组"><a href="#2。数据库描述分组" class="headerlink" title="2。数据库描述分组"></a>2。数据库描述分组</h5><ul>
<li>向邻站给出自己的链路状态数据库中的所有链路状态项目的<strong>摘要信息</strong></li>
</ul>
<h5 id="3。链路状态请求分组"><a href="#3。链路状态请求分组" class="headerlink" title="3。链路状态请求分组"></a>3。链路状态请求分组</h5><ul>
<li>向对方请求发送给某些链路状态项目的详细信息</li>
</ul>
<h5 id="4。链路状态更新分组"><a href="#4。链路状态更新分组" class="headerlink" title="4。链路状态更新分组"></a>4。链路状态更新分组</h5><ul>
<li>用洪泛法对全网更新链路状态。</li>
<li>是OSPF协议的最核心部分</li>
</ul>
<h5 id="5。链路状态确认分组"><a href="#5。链路状态确认分组" class="headerlink" title="5。链路状态确认分组"></a>5。链路状态确认分组</h5><ul>
<li>对链路更新分组的确认</li>
</ul>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240109160720793.png" srcset="/img/loading.gif" lazyload alt="image-20240109160720793"></p>
<h4 id="工作过程"><a href="#工作过程" class="headerlink" title="工作过程"></a>工作过程</h4><h5 id="1-确认邻站可达"><a href="#1-确认邻站可达" class="headerlink" title="1.确认邻站可达"></a>1.确认邻站可达</h5><p>​    每10交换一次问候分组，如果40秒没有收到某个相邻路由器发送的问候分组，则可认为相邻路由器不可达</p>
<h5 id="2-同步链路状态数据库"><a href="#2-同步链路状态数据库" class="headerlink" title="2.同步链路状态数据库"></a>2.同步链路状态数据库</h5><p>​    <strong>同步：</strong>不同路由器的链路状态数据库的内容是一样的</p>
<p>​    <strong>完全邻接路由器</strong>：两个同步的路由器</p>
<h5 id="3-更新链路状态"><a href="#3-更新链路状态" class="headerlink" title="3.更新链路状态"></a>3.更新链路状态</h5><blockquote>
<p>OSPF链路状态只涉及相邻路由器，与整个互联网的规模无直接关系</p>
</blockquote>
<ul>
<li>只要链路状态发生变化，路由器就用链路状态更新分组，用<strong>可靠的洪泛法</strong>向全网更新链路状态</li>
</ul>
<p><strong>可靠的洪泛法</strong></p>
<ul>
<li>再收到更新分组后要发送确认。</li>
</ul>
<p><img src="https://typoranote-picture.oss-cn-guangzhou.aliyuncs.com/typora%E5%9B%BE%E7%89%87/image-20240109161218756.png" srcset="/img/loading.gif" lazyload alt="image-20240109161218756"></p>
<h2 id="五、路由器的构成"><a href="#五、路由器的构成" class="headerlink" title="五、路由器的构成"></a>五、路由器的构成</h2><h3 id="1-路由器的结构"><a href="#1-路由器的结构" class="headerlink" title="1.路由器的结构"></a>1.路由器的结构</h3><blockquote>
<p>路由器是一种具有多个输入端口和多个输出端口的专用计算机，任务是<strong>转发分组</strong></p>
</blockquote>
<h4 id="1）路由选择部分-控制层面"><a href="#1）路由选择部分-控制层面" class="headerlink" title="1）路由选择部分(控制层面)"></a>1）路由选择部分(控制层面)</h4><ul>
<li>核心构件是<strong>路由选择处理机</strong><ul>
<li>路由选择处理机的任务是根据所选定的路由选择协议<strong>构造出路由表</strong>。并定期和相邻路由器交换路由信息更新和维护路由表</li>
</ul>
</li>
</ul>
<h4 id="2）分组转发部分-数据层面"><a href="#2）分组转发部分-数据层面" class="headerlink" title="2）分组转发部分(数据层面)"></a>2）分组转发部分(数据层面)</h4><p>1.交换结构</p>
<p>​    作用是<strong>根据转发表来对分组进行处理</strong>，将某个输入端口进入的分组从一个合适的输出端口转发出去</p>
<p>2.一组输入端口</p>
<p>3.一组输出端口(端口是硬件接口)</p>
<h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><p>1.网络层向上提供的服务有娜两种，比较优缺点</p>
<table>
<thead>
<tr>
<th align="center">对比</th>
<th align="center">虚电路</th>
<th align="center">数据报</th>
</tr>
</thead>
<tbody><tr>
<td align="center">思路</td>
<td align="center">可靠通信应当由网络来保证</td>
<td align="center">可靠通信由用户主机来保证</td>
</tr>
<tr>
<td align="center">连接的建立</td>
<td align="center">必须建立连接</td>
<td align="center">不需要</td>
</tr>
<tr>
<td align="center">终点地址</td>
<td align="center">仅在连接建立阶段使用，每个分组使用短的虚电路号</td>
<td align="center">每个分组都有终点的完整地址(IP地址)</td>
</tr>
<tr>
<td align="center">分组的转发</td>
<td align="center">属于同一条虚电路的分组均按照同一路由进行转发</td>
<td align="center">每个分组独立查找转发表进行转发</td>
</tr>
<tr>
<td align="center">当节点出现故障时</td>
<td align="center">所有通过出故障的节点的虚电路均不能工作</td>
<td align="center">出故障的节点可能丢失分组，一些路由可能会发生变化</td>
</tr>
<tr>
<td align="center">分组的顺序</td>
<td align="center">总是按发送顺序达到终点</td>
<td align="center">到达终点的顺序不一定按发送的顺序</td>
</tr>
<tr>
<td align="center">端到端的差错处理和流量控制</td>
<td align="center">可以由网络复制，也可由用户主机负责</td>
<td align="center">由用户主机负责</td>
</tr>
<tr>
<td align="center">成本</td>
<td align="center">成本高</td>
<td align="center">成本低</td>
</tr>
<tr>
<td align="center">是否可靠</td>
<td align="center">可靠传输</td>
<td align="center">不可靠传输</td>
</tr>
</tbody></table>
<p>虚电路服务</p>
<p>优点</p>
<ul>
<li>虚电路服务是面向连接的,网络能够保证分组总是按照发送顺序到达日的站,且不丢失、不重复,提供可靠的端到端数据传输</li>
<li>目的站地址仅在连接建立阶段使用,每个分组使用短的虚电路号,使分组的控制信息部分的比特数减少,减少了额外开销</li>
<li>端到端的差错处理和流量控制可以由分组交换网负责,也可以由用户机负责</li>
<li>虚电路服务适用于通信信息量大、速率要求高、传输可靠性要求高的场合</li>
</ul>
<p>缺点</p>
<ul>
<li>虚电路服务必须建立连接;</li>
<li>属于同一条虚电路的分组总是<strong>按照同一路由进行转发</strong>;</li>
<li>当结节发生故障时,所有通过出故障的节点的虚电路均不能工作。</li>
</ul>
<p>数据报服务</p>
<p>优点</p>
<ul>
<li>数据报服务不需要建立连接;</li>
<li>每个分组<strong>独立选择路由进行转发</strong>,当某个节点发生故障时,后续的分组可以另选路由,因而提高了通信的可靠性。</li>
<li>数据报服务的灵活性好。适用于传输可靠性要求不高、通信子网负载不均衡、需要选择最佳路径的场合。</li>
</ul>
<p>缺点</p>
<ul>
<li>数据报服务是面向无连接的,到达目的站时不一定按发送顺序,传输中的分组可能丢失和重复,提供面向无连接的、不可靠的数据传输;</li>
<li>每个分组都要有目的站的全地址;</li>
<li>当网络发生故障时,<strong>出故障的节点可能会丢失数据</strong>,一些路由可能会发生变化;</li>
<li>端到端的差错处理和流量控制只由主机负责。</li>
</ul>
<hr>
<p>2.中间设备、转发器、网桥、路由器和网关的区别</p>
<ul>
<li><p><strong>物理层</strong>使用的中间设备叫做<strong>转发器</strong></p>
</li>
<li><p><strong>数据链路层</strong>使用的中间设备叫做<strong>网桥或者桥接器，以及交换机</strong></p>
<ul>
<li>根据MAC地址转发</li>
</ul>
</li>
<li><p><strong>网络层</strong>使用的中间设备叫做<strong>路由器</strong></p>
<ul>
<li>根据路由表转发</li>
</ul>
</li>
<li><p><strong>网络层以上</strong>使用的中间设备叫做<strong>网关</strong>。网关连接两个不兼容的系统需要在高层进行协议的转换</p>
</li>
</ul>
<hr>
<p>3.简单说明IP、ARP和ICMP协议的作用</p>
<p>IP：</p>
<p>IP只为主机提供一种<strong>无连接、不可靠的、尽力而为</strong>的数据包传输服务。</p>
<ul>
<li><p><strong>网络层最核心的协议就是IP协议。</strong></p>
</li>
<li><p>IP协议根据数据包的目的IP地址来<strong>决定如何传输。</strong></p>
</li>
<li><p>IP协议<strong>根据「IP地址」将数据传输到指定的目标主机</strong></p>
</li>
<li><p>如果数据包不能直接发送到目标主机，那么IP协议就会为它寻找下一个合适的路由器，并将数据包交付给该路由器来转发。多次重复这一过程，数据包最终到达目标主机，或由于发送失败而被丢弃。</p>
</li>
<li><p>IP协议使用跳转的方式确定通信路径。</p>
</li>
</ul>
<p><strong>ARP：</strong></p>
<p>​    知道IP地址，需要找到其对应的MAC地址</p>
<p>在主机 ARP 高速缓存中存放一个从 IP 地址到硬件地址的映射表，并且这个映射表经常动态更新。每一台主机都设有一个 ARP 高速缓存(ARP Cache)，里面有本局域网上的各主机和路由器的 <strong>IP 地址到硬件地址的映射表</strong>(并且每一个映射地址都设置有生存时间)。</p>
<p><strong>ICMP：</strong></p>
<ul>
<li>更有效地<strong>转发IP数据报</strong>和<strong>提高交付成功</strong>的机会。</li>
<li>检测网络通信故障和实现链路追踪</li>
<li>提供差错ICMP差错报告报文和ICMP询问报文</li>
</ul>
<hr>
<p>4.简述RIP OSPF BGP路由选择协议的主要特点</p>
<table>
<thead>
<tr>
<th>RIP</th>
<th>OSPF</th>
<th>BPG</th>
</tr>
</thead>
<tbody><tr>
<td>1）仅和<strong>相邻</strong>路由器交换信息</td>
<td>1）采用<strong>洪泛法</strong>，向本自治系统中<strong>所有路由器</strong>发送消息</td>
<td>1)基于<strong>路径向量</strong>的路由选择协议</td>
</tr>
<tr>
<td>2）路由器交换的信息就是<strong>当前本路由器所知道的全部信息</strong>，即自己现在的<strong>路由表</strong></td>
<td>2）发送的消息是与本<strong>路由器相邻</strong>的所有路由器的<strong>链路状态</strong>，但这只是路由器知道的部分信息</td>
<td>2）对<strong>不同的自治系统</strong>的路由器之间发送交换</td>
</tr>
<tr>
<td>3）按<strong>固定的时间间隔</strong>交换路由信息(更新路由表)</td>
<td>3）当链路状态<strong>发送变化</strong>或<strong>每隔一段时间</strong>，路由器用洪泛法向所有路由器发送此消息</td>
<td>3）寻找较好的而非最佳路径</td>
</tr>
<tr>
<td>使用UDP</td>
<td>使用IP</td>
<td>使用TCP</td>
</tr>
</tbody></table>
<hr>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%80%83%E8%AF%95/" class="category-chain-item">考试</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">#计算机网络</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>计网第四章网络层</div>
      <div>https://ahaostillcoding.github.io/2024/01/14/计网第四章网络层/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>a_hao</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年1月14日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/01/14/%E8%AE%A1%E7%BD%91%E7%AC%AC%E4%BA%94%E7%AB%A0%E8%BF%90%E8%BE%93%E5%B1%82/" title="计网第五章运输层">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计网第五章运输层</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/01/14/%E8%AE%A1%E7%BD%91%E7%AC%AC%E4%B8%89%E7%AB%A0%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" title="计网第三章数据链路层">
                        <span class="hidden-mobile">计网第三章数据链路层</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      

    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
